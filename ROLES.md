# 系統權限說明文件 (RBAC Documentation)

本系統採用角色存取控制 (Role-Based Access Control)，根據不同職務提供對應的功能分頁。

## 角色帳密與權限表

| 角色 | 使用者名稱 | 密碼 | 可見功能分頁 | 說明 |
| :--- | :--- | :--- | :--- | :--- |
| **管理人員 (Admin)** | `admin` | `admin123` | **全部功能** | 擁有最高權限，可查看包含訪客統計、營收趨勢等所有數據。 |
| **財務人員 (Fin)** | `fin` | `fin123` | 營運總覽、發票稽核、對帳中心、2026年運營 | 專注於財務對帳與發票稽核需求。 |
| **行政人員 (Ops)** | `ops` | `ops123` | 2026年運營 | 僅提供日常營運數據與備註編輯功能。登入後自動引導至該頁面。 |

---

## 功能分頁權限細節

| 分頁標籤 | Admin | Fin | Ops | 備註 |
| :--- | :---: | :---: | :---: | :--- |
| **營運總覽 (Overview)** | ✅ | ✅ | ❌ | 包含 KPI 概覽與營收走勢 |
| **營收趨勢 (Growth)** | ✅ | ❌ | ❌ | 包含年度/月度增長分析(YoY/MoM) |
| **發票稽核 (Invoice)** | ✅ | ✅ | ❌ | 檢查發票斷號、重複、跳號等異常 |
| **2026年運營 (Ops2026)** | ✅ | ✅ | ✅ | 每日營收、天氣、備註錄入 |
| **訪客統計 (Visitor)** | ✅ | ❌ | ❌ | 訪客數據與人均消費 (ARPU) |
| **對帳中心 (Recon)** | ✅ | ✅ | ❌ | 各支付平台報表上傳與系統比對 |

---

## 登入與介面說明

1. **登入方式**：進入 `/login` 頁面輸入對應的使用者名稱與密碼。
2. **切換身分**：點擊儀表板右上角的「**登出 (Logout)**」按鈕後，即可更換其他帳號登入。
3. **身分標示**：右上角會顯示當前登入的使用者名稱及其所屬 Role，例如 `fin (Fin Role)`。

---

## 技術實作摘要
*   **Session 管理**：使用 JWT 加密存儲於 Cookie 中。
*   **權限檢查**：前端 `DashboardView` 根據 `session.role` 動態過濾 Tab 陣列。
*   **安全性**：Server Actions 會根據 Session 狀態決定是否授權數據讀取。
